!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):t.jQuery)}(this,function(t){"use strict";t.fn.cleverInfiteScroll=function(e){var n={contentsWrapperSelector:"#contentsWrapper",contentSelector:".content",nextSelector:"#next"},o=t.extend(n,e),i=function(t,e){return"<span class='hidden-title' style='display:none'>"+t+"</span><span class='hidden-url' style='display:none'>"+e+"</span>"},r=function(e,n){t("title").html(e),history.pushState(null,e,n)},c=function(e){var n=t(e).children(".hidden-title:first").text(),o=t(e).children(".hidden-url:first").text();t("title").text()!==n&&r(n,o)},l=t("title").text(),s=t(location).attr("href");t(o.contentSelector+":last").append(i(l,s)),r(l,s);var d,a,f=0;return t(window).scroll(function(){if(window.clearTimeout(t.data("this","scrollTimer")),t.data(this,"scrollTimer",window.setTimeout(function(){d=t(o.contentSelector),a=t(window).scrollTop(),a>f?d.each(function(e,n){return t(n).offset().top>t(window).scrollTop()?(c(n),!1):void 0}):f>a&&d.each(function(e,n){return t(n).offset().top+t(n).height()>t(window).scrollTop()?(c(n),!1):void 0}),f=a},200)),t(window).scrollTop()+t(window).height()===t(document).height()){var e=[t(o.nextSelector).attr("href")];t(o.nextSelector).remove(),void 0!==e[0]&&t.ajax({url:e[0],dataType:"html",success:function(n){l=t(n).filter("title").text(),s=e[0],t(o.contentsWrapperSelector).append(t(n).find(o.contentSelector).append(i(l,s))).append(t(n).find(o.nextSelector)),r(l,s)}})}}),this}});
